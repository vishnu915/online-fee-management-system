{% extends "base.html" %}
{% block content %}
<h2>Add New Student</h2>

<form method="POST" class="card" style="max-width:600px;" id="studentForm">

    <label>Name</label>
    <input type="text" name="name" required>

    <label>Admission No.</label>
    <input type="text" name="admission_no" required>

    <label>Year</label>
    <select name="year" required>
        <option>1st</option>
        <option>2nd</option>
        <option>3rd</option>
    </select>

    <label>Quota</label>
    <select name="quota" required>
        <option>Management</option>
        <option>Convener</option>
    </select>

    <label>Address</label>
    <textarea name="address" required></textarea>

    <label>Academic Year</label>
    <select name="academic_year" id="academic_year" required onchange="updateGroups()">
        <option value="">Select Academic Year</option>
        {% for y in range(2019, 2026) %}
            <option value="{{ y }}-{{ y+1 }}">{{ y }}-{{ y+1 }}</option>
        {% endfor %}
    </select>

    <label>Group</label>
    <select name="group" id="groupSelect" required>
        <option value="">Select Group</option>
    </select>

    <input type="submit" value="Add Student & Enter Fees" class="btn">
</form>

<script>
const groupData = {
    "2025-2026": ["B.Com", "B.Sc(CS)", "BCA", "B.Sc(Chemistry)"],
    "2024-2025": ["B.Com", "B.Sc(CS)", "BCA", "B.Sc(Chemistry)"],
    "2023-2024": ["B.Com", "B.Sc(CS)", "BCA", "B.Sc(Chemistry)"],
    "2022-2023": ["B.Com", "B.Sc(MSCS)"],
    "2021-2022": ["B.Com", "B.Sc(MPCS)", "B.Sc(MSCS)"],
    "2020-2021": ["B.Com", "B.Sc(MPCS)", "B.Sc(MSCS)"],
    "2019-2020": ["B.Com", "B.Sc(MPCS)", "B.Sc(MSCS)"]
};

function updateGroups() {
    const academicYear = document.getElementById("academic_year").value;
    const groupSelect = document.getElementById("groupSelect");
    groupSelect.innerHTML = '<option value="">Select Group</option>';

    if (academicYear in groupData) {
        groupData[academicYear].forEach(group => {
            const option = document.createElement("option");
            option.value = group;
            option.text = group;
            groupSelect.appendChild(option);
        });
    }
}
</script>
{% endblock %}
